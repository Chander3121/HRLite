<h1 class="text-2xl font-bold mb-6">My Regularization Requests</h1>

<table class="min-w-full bg-white rounded-xl shadow text-sm">
  <thead class="bg-gray-50">
    <tr>
      <th class="px-6 py-3">Date</th>
      <th class="px-6 py-3">Reason</th>
      <th class="px-6 py-3">Status</th>
      <th class="px-6 py-3">Action</th>
    </tr>
  </thead>

  <tbody class="divide-y">
    <% @requests.each do |r| %>
      <tr>
        <td class="px-6 py-3 text-center"><%= r.date %></td>
        <td class="px-6 py-3 text-center"><%= r.reason %></td>
        <td class="px-6 py-3 text-center">
          <span class="px-2 py-1 rounded-full text-xs font-medium
            <%= r.pending? ? "bg-yellow-100 text-yellow-700" :
                r.approved? ? "bg-green-100 text-green-700" :
                "bg-red-100 text-red-700" %>">
            <%= r.status.titleize %>
          </span>
        </td>
        <td class="px-6 py-3 text-center">
          <% if r.pending? %>
            <div class="flex justify-end gap-3">
              <%= link_to "Edit",
                  edit_attendance_regularization_path(r),
                  class: "text-indigo-600 text-sm hover:underline" %>

              <%= button_to "Cancel",
                  cancel_attendance_regularization_path(r),
                  method: :patch,
                  data: { turbo: false, confirm: "Cancel this regularization request?" },
                  class: "text-red-600 text-sm hover:underline" %>
            </div>
          <% else %>
            <span class="text-xs text-gray-400">Locked</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
